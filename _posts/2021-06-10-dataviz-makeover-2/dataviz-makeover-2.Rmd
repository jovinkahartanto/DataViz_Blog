---
title: "DataViz Makeover 2 - Merchandise trade"
description: |
  DataViz Makeover 2 for ISSS608: Visual Analytics
author:
  - name: Jovinka Hartanto
    url: https://www.linkedin.com/in/jovinkahartanto/
date: 06-10-2021
output:
  distill::distill_article:
    self_contained: false
    toc: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# 1. Introduction
Nowadays, data visualisation such as graphs and maps can be found anywhere. Data visualisation can help us to understand better what the information means and it will also make it easier to understand the trends, patterns, and outliers within large datasets. However, a poor data visualisation can be misleading or make it even harder to understand the information. 

This post will makeover the chart below, so that it can be more fruitful for the audience. The data visualisation will be created by using data provided by Department of Statistics, Singapore (DOS). The data are available under the sub-section of [Merchandise Trade by Region/Market](https://www.singstat.gov.sg/find-data/search-by-theme/trade-and-investment/merchandise-trade/latest-data).

![Figure 1](img/original.png)
Source: [Department of Statistics, Singapore](https://www.singstat.gov.sg/modules/infographics/singapore-international-trade)

# 2. Critique of Visualisation 
To explore different perspective and design more truthful and enlightening data visualisation, we will first observe the original visualisation. The critiques will be divided into two section, clarity and aesthetics.  


## 2.1 Clarity
1. **The label is not clear**, it only shows country or trading partner name and number without explaining what is the number stands for, it can caused misinterpretation.
2. **There is no gridlines** in the chart to help the audience compare the import and export values, the non existence of gridline also make the data point is harder to read  
3. **There is not enough annotation or tooltip** that can show the audience the import and export value
4. **There is no clear explanation on how to determine the top net exporter and top net importer**

## 2.2 Aesthetics
1. **The opacity of the chart can be reduced**, since some of the plots overlap each other and  it is hard to see if the centre point (white circle) of the bubbles falls in blue or green region 
2. **A similar color is used to represent two different trading partners, Thailand and EU**
3. **Using an acronym for European Union (EU) make the naming of the trading partners inconsistent**, since the rest of the trading partners was written in the long form 

# 3. Alternative Design

The alternative graphical design proposed can be seen below:

![Figure 2](img/prop1.png)

# Clarity:
1. All the trading partners will be written in the long form 
2. Added more information for each plot, which are total import, total export, total import and export, and lastly country's monthly trend trading data for the selected year
3. Added gridlines to make the data point easier to read

# Aesthetics:
1. The opacity and the size of the scatter plot has been reduced, therefore all the plots can be seen, even though some of they are overlapped
2. Give a different colour for trading partners with value of exports exceeds imports and trading partners with sum of imports exceeds exports, therefore it will be easier to see which countries falls into which group rather than relying on the centre point of the plot like in the original visualisation
3. All the naming of trading partners are consistent, there is no acronym in the label of the plots


# 4. Step-by-Step Guide

## 4.1 Data Preparation

1. Copy the table from the raw dataset and paste it into the first row of the new created worksheet by using excel workbook.

2. Remove the data that is outside the study period. The study period for this study is between January 2011 to December 2020 for both import and export data. Clean import and export data are stored in the same file, but two different worksheets.

3. Import clean dataset into tableau. There are few ways to import the dataset, two of them are:
* Click **Microsoft Excel** and select your file or

![Figure 3](img/import_data_tableau.png) 

* Drag the desired data file to tableau data source

![Figure 4](img/import_data_tableau2.png) 

4.Drag new union to workspace 

![Figure 5](img/import_data_tableau3.png) 

5. A union window will pop out, drag both import and export clean data to union window -> **ok**

![Figure 6](img/import_data_tableau4.png) 

6. To change the monthly data to columnar format, select the import and export data from 2011 Jan to 2020 Dec by clicking 2011 Jan data -> Press **Shift** and click 2020 Dec data.
If you did it correctly, all the selected columns will turn blue.

![Figure 7](img/import_data_tableau5.png)

7. Click the small arrow in 2020 Dec column -> **Pivot**

![Figure 8](img/import_data_tableau6.png)
8. The result of the pivot is as shown below

![Figure 9](img/import_data_tableau7.png)

9. Double click on the column name to rename it

10. Since the date data type is marked as string, change the data type to Date by clicking **abc** in the column's top left -> **Date**. Change **Pivot Field Values** data type to **number** instead of **string** 

![Figure 10](img/import_data_tableau8.png)

11. Since the variables consist of to components, trading partners and unit, we will split variables into two separate columns by clicking the small arrow in the column name -> Split

![Figure 11](img/import_data_tableau9.png)

12. The Variables column will be split into 2 columns, **Variables - split 1** and **Variables - split 1**

![Figure 12](img/import_data_tableau10.png)

Rename it into **Trading Partner*s* and **Unit** by double clicking the column names and type the desired column name.

13. Hide the original Variables column since we do not need it anymore

![Figure 13](img/import_data_tableau11.png)

14. Do quality assurance (QA) to check any data discrepancies, especially for the split columns by dragging unit to the row pane in workspace canvas

![Figure 14](img/import_data_tableau12.png)

15. Unit supposed to be either **Million** or **Thousand**, however it can be seen from the table below that there are other components that is not suppose to be in unit.

![Figure 15](img/import_data_tableau13.png)

16. We can observe further by dragging **Trading Partners** into row shelves and **Unit** into filter -> untick **Million** and **Thousand** to see the which countries are these units belong to 

![Figure 16](img/import_data_tableau14.png)

![Figure 17](img/import_data_tableau15.png)


![Figure 18](img/import_data_tableau16.png)

17. Create another column or variable called "Trading_Partners_Cleaned" to store the modified partners' name by using calculated field

![Figure 19](img/import_data_tableau17.png)

![Figure 20](img/import_data_tableau18.png)

18. Create another calculated field called **Unit_Cleaned**, the formula is as follow

![Figure 21](img/import_data_tableau19.png)

19. Separate the merchandise trade values into Export and Import variable by using calculated field and since merchandise trade values are in either Million or Thousand dollars, the value will be multiplied by 1,000 or 1,000,000 based on the unit. The formula for export and import value are as follow:

![Figure 22](img/import_data_tableau20.png)

![Figure 23](img/import_data_tableau21.png)

20. It was observed that the trading partners are not only countries, it also consist of continents and total export and import. Since the focus in this study is to compare merchandise trade data between countries and union, we will create a calculated field that is only consist of countries and union.

![Figure 24](img/import_data_tableau22.png)
21. Create another calculated field as *Total Export & Import*

![Figure 25](img/import_data_tableau23.png)


Now the data preparation is done, merchandise trade data is ready to be used for the analysis.

## 4.2 Top 10 Trading Partners

1. In a clean worksheet:

* Drag **Export** to columns shelves,**Import** to rows shelves, **Country** to detail in marks shelves to create the scatter plot
* Drag **Country** to Text, to show Country Name in the plot
* Drag **Total Export & Import** to tooltip, to give more information for each plot

![Figure 26](img/top1.png)

2.Drag **Country** to filters shelves
![Figure 27](img/top2.png)

3. Change the filter[Country] setting 
* General-> Untick null

![Figure 28](img/top3.png)

* Top -> By Field -> Change **Country** to **Total Export & Import** -> Apply -> Ok

![Figure 29](img/top4.png)

4. Drag **Date** to filters shelves -> Double click on **# Years**

![Figure 30](img/top5.png)

Click All -> Apply -> Ok

![Figure 31](img/top6.png)

5. Show both Country and Year(Date) filter by clicking the small white arrow -> Show Filter 

![Figure 32](img/top7.png)

6. The selection default of this Filter[Country] is **Multiple Values (list)**

![Figure 33](img/top8.png)

 But, it will look better if we change it to **Multiple Values (dropdown)** . Click small black arrow in the selection beside the text **Country** -> Multiple Values (dropdown)
 
![Figure 34](img/top9.png)

7. Repeat steps 5 and 6 for Filter[Year of Date], but instead of choosing Multiple Values (dropdown), choose Single Value (dropdown)

8. Remove **(All)** from year selection. Click small black arrow beside the text **Year(Date)** -> Customize -> Show "All" Value

![Figure 35](img/top10.png)

9. To change the chart title, double click on the title and change the title. However, in this case we want to insert YEAR(Date) selection variable to the title, the steps to add the selection variable are as follow:

1. Remove **<Sheet Name>**, and type the text
2. Click **Insert** -> YEAR(Date)

![Figure 36](img/top11.png)
10. Change the plot from **Automatic** -> **Circle**

![Figure 37](img/top12.png)

11. Adjust the size, by selecting the icon below 

![Figure 38](img/top13.png)

12. For visualization purposes, we will create a new boolean calculated field to separate the plot into two groups with two different colour. The first group is if sum of Import data higher than sum of Export data for the selected year. The second group is their sum of Export data higher than sum of Import data.

The calculated field formula is as follow:

![Figure 39](img/top14.png)
13. Drag **import>export** variable to colour, and now we can see two different groups. Orange plots are those countries with sum of import higher than export for the selected year, year 2019 was selected for the example below

![Figure 40](img/top15.png)
14. Adjust the color by clicking colour in marks shelves.

![Figure 41](img/top16.png)

15.By default, all filters that are set in Tableau are computed independently. That is, each filter accesses all rows in the data source without regard to other filters.However in this case we need to filter the data by selected year and and pass the filtered data to select the top 10 total merchandise trade data. The steps are as follow:

1. Click the small white arrow in YEAR(Date) filter

![Figure 42](img/top17.png)

2. Click **Add to Context**

![Figure 43](img/top18.png)

16. Adjust the opacity by clicking colour icon -> change the opacity percentage

![Figure 44](img/top19.png)
17. Drag **Total Export & Import** to size, the bigger the size of the scatter plot, the higher the sum of total import & export for that country for the selected year. Adjust the circle size by clicking **Size** icon

![Figure 45](img/top20.png)
18. Adjust the label font and alignment by clicking **Label** icon.

![Figure 46](img/top21.png)
19. Create 45 degree line to show net importers and net exporters. The steps to create the 45 degree line,  are as follow:

1. Drag **Import** to columns shelf -> Click the small arrow -> **Dual Axis**
2. Click **Sum(Import)** in the columns shelf and edit the components under marks shelf
3. Remove **Country** (Text - SUM(Import)) and **AGG(Total Export and Import)** (Size and Tooltip - SUM(Import)) from Marks shelf 
4. Change the size to the smallest
5. Click **Color** in SUM(Import) -> change the opacity to 0%
6. Right click on the graph -> **Trend Lines** -> **Show Trend Lines** -> **SUM(Import)**
7. Change the axis range to **Fixed** -> change **Fixed start** and **Fixed end**
8. Make sure all axis have same range
9. Change the format of the 45 degree line by double clicking the line -> **Format**
10. Change the format of the trend line to dotted line


## 4.3 Import Export Trend

This line chart is created to show the monthly import export trend for the selected year and selected country. The chart will be inserted in the **Top 10 Trading Partners** plot's tooltip.

1. Create a new worksheet by clicking the icon below

![Figure 47](img/tt1.png)
2. Drag **Country** and **Date** variable to columns shelves, **Import** and **Export** to rows shelves

![Figure 48](img/tt2.png)
3. Click the small arrow in **YEAR(Date)** variable in columns pane -> Select month

![Figure 49](img/tt3.png)

![Figure 50](img/tt4.png)

4. We will use dual lines graph for this chart.

![Figure 51](img/tt5.png)

Once you click dual lines graph, country variable will move to rows shelves, drag country back to columns shelves. 

5. To make the colour of the axis title match with the color of the chart, right click on the axis -> Format

![Figure 52](img/tt6.png)

6. Click the small arrow beside **Font** -> Choose the colour

![Figure 53](img/tt7.png)

7. Repeat step 5 and 6 for export axis

8. Double click on the sheet name to rename it

![Figure 54](img/tt8.png)
9. Edit the alignment and format of the x-axis label by right clicking the x-axis -> Format 

Change the **Alignment** to up -> Change the label format **MMM-YY**

## 4.4 Adding line graph as a tooltip for scatter plot

1. Click the tooltip icon on scatter plot

2.To insert the other chart to the tooltip, click **Insert** in Edit Tooltip window -> Sheets -> Select the chart that wanted to be added to the tooltip

![Figure 55](img/att1.png)
3. Adjust maxwidth and mexheight according to the size of the inserted chart. In this case we will use 700 for maxwidth and 300 for maxheight

![Figure 56](img/att2.png)

4. Drag **Date** into detail to make the chart in the tooltip become monthly trend for the selected year instead of yearly trend

![Figure 57](img/att3.png)

5. The tooltip will look like the figure below when we hover the mouse over the plot. 

![Figure 58](img/att4.png)

6. Create a new calculation field for tooltip

![Figure 59](img/att5.png)

7. Edit the tooltip by clicking tooltip in under **All** Marks shelves, edit the tooltip as per below

![Figure 60](img/att6.png)


## 4.5 Animations

Turn on the animation by selecting **Format** -> **Animation**

![Figure 61](img/ani1.png)
The settings for animation is as follows

![Figure 62](img/ani2.png)

## 4.6 Dashboard

1. Create a new dashboard

![Figure 63](img/db1.png)

2. Drag the **Top 10** chart to the dashboard

![Figure 64](img/db2.png)

3. Change the dashboard size to **Automatic**

![Figure 65](img/db3.png)

4. Any objects can be added to the dashboard, in this case we want to edit text to the blank space by dragging **Text** to the blank space below the year selection

![Figure 66](img/db4.png)

5. Once we drag the **Text**, **Edit Text** panel will instantly pop up, edit the text as per below

![Figure 67](img/db5.png)

6. Add another text on top of the year selection, to add **Select Year and Countries** text
7. The final dashboard is ready, dashboard has been published to [Tableau Public](https://public.tableau.com/app/profile/jovinka.hartanto3850/viz/datavizmakeover2-Final/Dashboard1)

# 5.0 Major Obeservations

1. **In 2011 India was one of the top 10 Singapore's merchandise trading partner, however in 2012 the position was replaced by Thailand. India is never come back to the top 10 position until 2020.** 

![Figure 68](img/obs1.png) ![Figure 69](img/obs2.png)

The top 10 merchandise trading partners are remain the same for the past 8 years, from 2012 to 2020. The top 10 trading partners are:

* Mainland China
* Malaysia
* Indonesia
* Hongkong
* Taiwan
* Japan
* United States
* Republic of Korea
* European Union
* Thailand

2. **Since 2011 up till 2020, Malaysia and China is always the top 2 of Singapore's trading partners and in the year of 2015 China's total number of import and export increased from 2014, when most of the countries' number are decreasing from 2014 to 2015.**

It can be observed from the figure below that Malaysia and Indonesia total merchandise trade number decreased significantly from 2014 to 2015. Some of the other countries trade number's also decreasing, even though it is not very significant.


![Figure 70](img/obs3.png)

3. **Indonesia and United States are two countries that have a significant changes between the year of 2011 and the year of 2019.**

The trend of Indonesia's total export and Import was going down over the years (2011 - 2019) especially the exports value, on the other hand United States' trend was going up over the year. The year of 2020 was not taken into consideration since Covid-19 pandemic is getting worse in that year and it affected the merchandise trade between countries.

* Indonesia

![Figure 71](img/obs4.png) ![Figure 72](img/obs5.png)

* United States

![Figure 73](img/obs6.png) ![Figure 74](img/obs7.png)


